local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")

-- Update humanoid reference if character respawns
player.CharacterAdded:Connect(function(c)
    char = c
    hum = char:WaitForChild("Humanoid")
end)

hum.Jump = true


local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local hum = char:WaitForChild("Humanoid") -- added humanoid ref

local speed = 50 -- studs per second

-- Create ScreenGui and Button
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FloatForwardGui"
screenGui.Parent = player:WaitForChild("PlayerGui")

local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 150, 0, 50)
button.Position = UDim2.new(0.5, -75, 0.8, 0)
button.BackgroundColor3 = Color3.fromRGB(30, 144, 255)
button.TextColor3 = Color3.new(1,1,1)
button.Text = "Float Forward"
button.Parent = screenGui
button.Active = true
button.Draggable = true -- make draggable

local bodypos = nil
local floating = false

local function startFloating()
    if floating then return end
    floating = true

    -- Make the character jump first
    hum.Jump = true

    bodypos = Instance.new("BodyPosition")
    bodypos.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
    bodypos.P = 10000
    bodypos.D = 1000
    bodypos.Position = hrp.Position
    bodypos.Parent = hrp

    local startTime = tick()
    local startPos = hrp.Position

    spawn(function()
        while floating and bodypos and bodypos.Parent do
            local elapsed = tick() - startTime
            local newPos = startPos + (hrp.CFrame.LookVector * speed * elapsed)
            bodypos.Position = newPos
            task.wait(0.03)
        end
    end)

    -- Stop after 5 seconds
    delay(1, function() -- changed to 5 seconds delay
        if bodypos then
            bodypos:Destroy()
            bodypos = nil
        end
        floating = false
    end)
end

button.MouseButton1Click:Connect(function()
game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(0, 100, 0)
    wait(0.5)
    startFloating()
end)
